<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CLAY 远程管理系统水寒凌魔改版 - 文档</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-color: #4CAF50;
            --secondary-color: #2196F3;
            --accent-color: #FF9800;
            --warning-color: #f44336;
            --dark-bg: #ffffff;
            --darker-bg: #f5f5f5;
            --border-color: #e0e0e0;
            --text-color: #333333;
            --heading-color: #1976D2;
        }
        
        body {
            background-color: var(--dark-bg);
            color: var(--text-color);
            font-family: system-ui, -apple-system, "Segoe UI", sans-serif;
            line-height: 1.6;
            font-size: 16px;
        }
        
        .header {
            background: linear-gradient(135deg, #1976D2 0%, #64B5F6 100%);
            color: white;
            padding: 3rem 0;
            margin-bottom: 2rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .header h1 {
            color: white;
            font-weight: 700;
            font-size: 2.5rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        
        .header .lead {
            color: rgba(255,255,255,0.9);
            font-size: 1.25rem;
        }
        
        .section {
            background-color: white;
            border-radius: 10px;
            margin-bottom: 2rem;
            padding: 2rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            border: 1px solid var(--border-color);
        }
        
        .section h2 {
            color: var(--heading-color);
            font-weight: 600;
            border-bottom: 2px solid var(--heading-color);
            padding-bottom: 0.5rem;
            margin-bottom: 1.5rem;
        }
        
        .section h3 {
            color: var(--heading-color);
            margin-top: 1.5rem;
            font-weight: 500;
        }
        
        .code-block {
            background-color: #2b2b2b;
            color: #e6e6e6;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1rem 0;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
            border: 1px solid #444;
        }
        
        .card {
            border: none;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            transition: transform 0.2s;
            margin-bottom: 1rem;
        }
        
        .card:hover {
            transform: translateY(-2px);
        }
        
        .card-header {
            background: linear-gradient(135deg, #2196F3 0%, #64B5F6 100%);
            color: white;
            font-weight: 500;
            border-radius: 10px 10px 0 0 !important;
            padding: 1rem 1.5rem;
        }
        
        .card-body {
            padding: 1.5rem;
        }
        
        .file-structure {
            font-family: 'Courier New', monospace;
            padding: 1.5rem;
            background-color: #f8f9fa;
            border-radius: 8px;
        }
        
        .file-structure ul {
            list-style-type: none;
            padding-left: 1.5rem;
            margin: 0;
        }
        
        .file-structure li {
            margin: 0.5rem 0;
            color: #333;
        }
        
        .file-structure li::before {
            margin-right: 0.5rem;
        }
        
        .file-structure li.folder {
            color: #1976D2;
            font-weight: 500;
        }
        
        .step {
            background-color: #E3F2FD;
            border-left: 4px solid #2196F3;
            padding: 1rem 1.5rem;
            margin: 1rem 0;
            border-radius: 0 8px 8px 0;
        }
        
        .step strong {
            color: #1976D2;
        }
        
        .alert-warning {
            background-color: #FFF3E0;
            border-color: #FFB74D;
            color: #E65100;
        }
        
        .alert-warning h4 {
            color: #F57C00;
        }
        
        .accordion-button {
            background-color: #f8f9fa !important;
            color: #333 !important;
            font-weight: 500;
        }
        
        .accordion-button:not(.collapsed) {
            background-color: #E3F2FD !important;
            color: #1976D2 !important;
        }
        
        .accordion-body {
            background-color: white;
            color: #333;
        }
        
        footer {
            background-color: #f8f9fa;
            padding: 2rem 0;
            margin-top: 3rem;
            border-top: 1px solid var(--border-color);
        }
        
        /* 添加一些动画效果 */
        .card, .section, .step {
            animation: fadeIn 0.5s ease-in-out;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* 改进列表样式 */
        ul:not(.file-structure ul) {
            padding-left: 1.2rem;
        }
        
        ul:not(.file-structure ul) li {
            margin: 0.5rem 0;
            position: relative;
            padding-left: 0.5rem;
        }
        
        ul:not(.file-structure ul) li::before {
            content: "•";
            color: var(--primary-color);
            font-weight: bold;
            margin-right: 0.5rem;
        }
        
        /* 改进代码块样式 */
        .code-block::-webkit-scrollbar {
            height: 8px;
        }
        
        .code-block::-webkit-scrollbar-track {
            background: #333;
            border-radius: 4px;
        }
        
        .code-block::-webkit-scrollbar-thumb {
            background: #666;
            border-radius: 4px;
        }
        
        .code-block::-webkit-scrollbar-thumb:hover {
            background: #888;
        }
    </style>
</head>
<body>
    <div class="header text-center">
        <div class="container">
            <h1>CLAY 远程管理系统</h1>
            <p class="lead">功能强大的跨平台远程管理工具</p>
        </div>
    </div>

    <div class="container">
        <div class="section">
            <h2>项目概述</h2>
            <p>CLAY远程管理系统是一个基于Python和WebSocket技术开发的远程控制工具，允许您通过浏览器界面远程控制多台电脑。</p>
			<p>此版本由水寒凌重构并维护，开源地址 https://github.com/itrfcn/Clay</p>
			<p>感谢CLAY大佬提供的初代版本，此版本基于初代版本进行了性能优化功能补充页面美化</p>
            
            <div class="row">
                <div class="col-md-6">
                    <div class="card h-100">
                        <div class="card-header">主要功能</div>
                        <div class="card-body">
                            <ul>
                                <li>远程执行终端命令</li>
                                <li>实时输出反馈</li>
                                <li>远程屏幕锁定</li>
                                <li>远程系统关机</li>
								<li>实时获取屏幕内容</li>
                                <li>远程摄像头监控</li>
                                <li>多客户端管理</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card h-100">
                        <div class="card-header">版本特色</div>
                        <div class="card-body">
                            <ul>
                                <li>开机自启进程隐藏</li>
                                <li>美观响应式Web控制界面</li>
                                <li>低延迟命令执行和反馈</li>
                                <li>控制端登录页面</li>
								<li>获取屏幕截图</li>
                                <li>可打包为独立可执行程序</li>
                                <li>心跳机制保证连接稳定</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>文件结构</h2>
            <p>项目包含以下核心文件和目录：</p>
            
            <div class="file-structure">
                <ul>
                    <li class="folder">📁 client/ - 客户端程序目录</li>
                    <ul>
                        <li>client.py - 客户端主程序</li>
                        <li>config.py - 客户端配置文件</li>
                        <li>requirements.txt - 客户端依赖列表</li>
                    </ul>
                    <li class="folder">📁 server/ - 服务器端程序目录</li>
                    <ul>
                        <li>app.py - 服务器主程序</li>
                        <li>requirements.txt - 服务器依赖列表</li>
						<li>server.log - 日志文件</li>
                        <li class="folder">📁 static/ - 静态资源目录</li>
                        <ul>
                            <li class="folder">📁 css/ - 样式文件</li>
                            <li class="folder">📁 js/ - JavaScript文件</li>
                        </ul>
                        <li class="folder">📁 templates/ - HTML模板目录</li>
                        <ul>
                            <li>index.html - 主界面模板</li>
							<li>login.html - 登录界面模板</li>
                        </ul>
                    </ul>
                </ul>
            </div>
        </div>

        <div class="section">
            <h2>系统配置</h2>
            
            <h3>服务器端配置</h3>
            <p>服务器端负责接收客户端连接，并提供Web控制界面。配置步骤如下：</p>
            
            <div class="step">
                <strong>步骤1:</strong> 安装Python环境（推荐Python 3.7+）
            </div>
            
            <div class="step">
                <strong>步骤2:</strong> 安装服务器依赖
                <div class="code-block">
                    pip install -r server/requirements.txt
                </div>
            </div>
            
            <div class="step">
                <strong>步骤3:</strong> 修改服务器配置（可选）
                <p>打开 server/app.py 文件，可以根据需要修改以下参数：</p>
                <ul>
                    <li>SECRET_KEY - 更改为您自己的安全密钥(第21行)</li>
					<li>PASSWORD - 更改为您自己的登录密码(第118行)</li>
                    <li>host - 设置监听地址（默认0.0.0.0表示所有网络接口）</li>
                    <li>port - 设置监听端口（默认5000）</li>
                </ul>
            </div>
            
            <h3>客户端配置</h3>
            <p>客户端需要连接到服务器，并执行远程命令。配置步骤如下：</p>
            
            <div class="step">
                <strong>步骤1:</strong> 安装Python环境（推荐Python 3.7+）
            </div>
            
            <div class="step">
                <strong>步骤2:</strong> 安装客户端依赖
                <div class="code-block">
                    pip install -r client/requirements.txt
                </div>
            </div>
            
            <div class="step">
                <strong>步骤3:</strong> 修改客户端配置
                <p>编辑 client/config.py 文件，修改服务器地址：</p>
                <div class="code-block">
                    # 将此地址修改为您的服务器IP地址
                    SERVER_URL = "http://你的服务器IP:5000"
                </div>
            </div>
        </div>

        <div class="section">
            <h2>运行系统</h2>
            
            <h3>启动服务器</h3>
            <div class="code-block">
                cd server
                python app.py
            </div>
            <p>服务器启动后，将在指定端口（默认5000）监听连接。</p>
            
            <h3>启动客户端</h3>
            <div class="code-block">
                cd client
                python client.py
            </div>
            <p>客户端启动后将自动连接到配置文件中指定的服务器地址。</p>
            
            <h3>访问Web控制界面</h3>
            <p>打开浏览器，访问：<code>http://服务器IP:5000</code></p>
            <p>在Web界面中，可以看到所有连接的客户端，并对其进行管理操作。</p>
        </div>

        <div class="section">
            <h2>打包成可执行文件</h2>
            <p>可以使用PyInstaller将客户端打包成独立的可执行文件（.exe），便于分发和使用：</p>
            
            <div class="step">
                <strong>步骤1:</strong> 安装PyInstaller
                <div class="code-block">
                    pip install pyinstaller
                </div>
            </div>
            
            <div class="step">
                <strong>步骤2:</strong> 确保配置文件已正确设置
                <p>在打包前，确保client/config.py中的SERVER_URL已设置为正确的服务器地址。</p>
            </div>
            
            <div class="step">
                <strong>步骤3:</strong> 执行打包命令
                <div class="code-block">
                    cd client
                    pyinstaller --onefile --noconsole --icon=YOURICON.ico client.py
                </div>
                <p><small>注：--noconsole参数会隐藏控制台窗口，如需调试建议移除此参数；YOURICON.ico替换为您自己的图标文件路径</small></p>
            </div>
            
            <div class="step">
                <strong>步骤4:</strong> 获取可执行文件
                <p>打包完成后，在dist目录下可以找到client.exe文件，这就是独立的可执行程序。</p>
            </div>
        </div>

        <div class="section">
            <h2>部署到服务器</h2>
            
            <h3>方法一：直接在服务器上运行</h3>
            <div class="step">
                <strong>步骤1:</strong> 将server目录上传到服务器
            </div>
            
            <div class="step">
                <strong>步骤2:</strong> 安装依赖
                <div class="code-block">
                    pip install -r requirements.txt
                </div>
            </div>
            
            <div class="step">
                <strong>步骤3:</strong> 运行服务器
                <div class="code-block">
                    python app.py
                </div>
                <p>对于生产环境，建议使用Gunicorn、uWSGI等WSGI服务器配合Nginx部署。</p>
            </div>
            
            <h3>方法二：使用Docker部署（推荐）</h3>
            <p>创建Dockerfile：</p>
            <div class="code-block">
FROM python:3.9-slim

WORKDIR /app

COPY server/ .
RUN pip install --no-cache-dir -r requirements.txt

EXPOSE 5000

CMD ["python", "app.py"]
            </div>
            
            <p>构建和运行Docker容器：</p>
            <div class="code-block">
# 构建镜像
docker build -t clay-server .

# 运行容器
docker run -d -p 5000:5000 --name clay-server clay-server
            </div>
        </div>

        <div class="section">
            <h2>文件详解</h2>
            
            <div class="accordion" id="fileAccordion">
                <div class="accordion-item bg-dark text-light border-secondary">
                    <h2 class="accordion-header" id="headingOne">
                        <button class="accordion-button bg-dark text-light" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne">
                            server/app.py - 服务器主程序
                        </button>
                    </h2>
                    <div id="collapseOne" class="accordion-collapse collapse show" data-bs-parent="#fileAccordion">
                        <div class="accordion-body">
                            <p>服务器主程序，基于Flask和Flask-SocketIO开发。主要功能：</p>
                            <ul>
                                <li>创建Web服务器和WebSocket服务</li>
                                <li>处理客户端连接和断开</li>
                                <li>管理客户端列表</li>
                                <li>转发命令和接收结果</li>
                                <li>提供Web控制界面</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="accordion-item bg-dark text-light border-secondary">
                    <h2 class="accordion-header" id="headingTwo">
                        <button class="accordion-button bg-dark text-light collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo">
                            client/client.py - 客户端主程序
                        </button>
                    </h2>
                    <div id="collapseTwo" class="accordion-collapse collapse" data-bs-parent="#fileAccordion">
                        <div class="accordion-body">
                            <p>客户端主程序，基于Python-SocketIO开发。主要功能：</p>
                            <ul>
                                <li>连接到服务器并保持心跳</li>
                                <li>执行来自服务器的命令</li>
                                <li>捕获命令执行结果并实时返回</li>
                                <li>支持系统操作（关机、锁屏等）</li>
                                <li>支持摄像头捕获</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="accordion-item bg-dark text-light border-secondary">
                    <h2 class="accordion-header" id="headingThree">
                        <button class="accordion-button bg-dark text-light collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree">
                            client/config.py - 客户端配置
                        </button>
                    </h2>
                    <div id="collapseThree" class="accordion-collapse collapse" data-bs-parent="#fileAccordion">
                        <div class="accordion-body">
                            <p>客户端配置文件，包含以下关键参数：</p>
                            <ul>
                                <li>SERVER_URL - 服务器连接地址</li>
                                <li>HEARTBEAT_INTERVAL - 心跳间隔（秒）</li>
                                <li>RECONNECT_DELAY - 重连延迟（秒）</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="accordion-item bg-dark text-light border-secondary">
                    <h2 class="accordion-header" id="headingFour">
                        <button class="accordion-button bg-dark text-light collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour">
                            server/templates/index.html - Web界面
                        </button>
                    </h2>
                    <div id="collapseFour" class="accordion-collapse collapse" data-bs-parent="#fileAccordion">
                        <div class="accordion-body">
                            <p>Web控制界面HTML模板，主要包含：</p>
                            <ul>
                                <li>客户端列表显示</li>
                                <li>终端控制面板</li>
                                <li>媒体监控面板</li>
                                <li>系统控制按钮</li>
                                <li>响应式布局设计</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>使用指南</h2>
            
            <h3>Web控制台功能</h3>
            <div class="row mb-4">
                <div class="col-md-6">
                    <div class="card h-100">
                        <div class="card-header">终端控制</div>
                        <div class="card-body">
                            <p>允许远程执行终端命令：</p>
                            <ul>
                                <li>支持所有系统命令</li>
                                <li>实时显示命令输出</li>
                                <li>支持目录导航（cd命令）</li>
                                <li>内置常用命令快捷按钮</li>
                                <li>命令执行中断功能</li>
                            </ul>
                        </div>
                    </div>
                </div>
				<div class="col-md-6">
                    <div class="card h-100">
                        <div class="card-header">摄像头监控</div>
                        <div class="card-body">
                            <p>远程访问客户端摄像头：</p>
                            <ul>
                                <li>一键获取当前画面</li>
                                <li>支持图像缩放</li>
                                <li>高清画质传输</li>
                                <li>快速刷新功能</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="card h-100">
                        <div class="card-header">系统信息</div>
                        <div class="card-body">
                            <p>查看客户端系统信息：</p>
                            <ul>
                                <li>通过 clay info 命令获取</li>
                                <li>显示CPU、内存、磁盘信息</li>
                                <li>显示网络状态</li>
                                <li>显示系统运行时间</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card h-100">
                        <div class="card-header">系统控制</div>
                        <div class="card-body">
                            <p>控制客户端系统：</p>
                            <ul>
                                <li>远程锁定屏幕</li>
                                <li>远程关机</li>
                                <li>特殊Clay命令</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>安全注意事项</h2>
            <div class="alert alert-warning">
                <h4 class="alert-heading">重要提示！</h4>
                <p>此系统具有强大的远程控制功能，请注意以下安全事项：</p>
                <ol>
                    <li>仅在授权的环境中使用</li>
                    <li>确保服务器端口不对外开放或使用防火墙限制访问</li>
                    <li>为服务器启用HTTPS加密（生产环境必须）</li>
                    <li>更改默认配置，特别是安全密钥</li>
                    <li>实现适当的身份验证机制（建议添加）</li>
                </ol>
                <p>未经授权使用此系统可能违反法律法规。</p>
            </div>
        </div>

        <div class="section">
            <h2>常见问题</h2>
            
            <div class="accordion" id="faqAccordion">
                <div class="accordion-item bg-dark text-light border-secondary">
                    <h2 class="accordion-header" id="faqHeadingOne">
                        <button class="accordion-button bg-dark text-light" type="button" data-bs-toggle="collapse" data-bs-target="#faqCollapseOne">
                            客户端无法连接服务器
                        </button>
                    </h2>
                    <div id="faqCollapseOne" class="accordion-collapse collapse show" data-bs-parent="#faqAccordion">
                        <div class="accordion-body">
                            <p>可能的解决方案：</p>
                            <ol>
                                <li>检查config.py中的SERVER_URL是否正确</li>
                                <li>确保服务器正在运行</li>
                                <li>检查防火墙设置是否允许5000端口流量</li>
                                <li>尝试在客户端使用ping命令测试服务器连通性</li>
                            </ol>
                        </div>
                    </div>
                </div>
                
                <div class="accordion-item bg-dark text-light border-secondary">
                    <h2 class="accordion-header" id="faqHeadingTwo">
                        <button class="accordion-button bg-dark text-light collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faqCollapseTwo">
                            摄像头功能无法使用
                        </button>
                    </h2>
                    <div id="faqCollapseTwo" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                        <div class="accordion-body">
                            <p>可能的解决方案：</p>
                            <ol>
                                <li>确保已安装opencv-python库</li>
                                <li>检查客户端计算机是否有摄像头</li>
                                <li>确认摄像头未被其他程序占用</li>
                                <li>检查系统摄像头权限设置</li>
                            </ol>
                        </div>
                    </div>
                </div>
                
                <div class="accordion-item bg-dark text-light border-secondary">
                    <h2 class="accordion-header" id="faqHeadingThree">
                        <button class="accordion-button bg-dark text-light collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faqCollapseThree">
                            命令执行没有反应
                        </button>
                    </h2>
                    <div id="faqCollapseThree" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                        <div class="accordion-body">
                            <p>可能的解决方案：</p>
                            <ol>
                                <li>检查WebSocket连接是否正常</li>
                                <li>确保命令格式正确</li>
                                <li>尝试使用中断按钮，然后重新执行命令</li>
                                <li>重启客户端程序</li>
                            </ol>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <footer class="text-center text-muted py-4">
            <p>CLAY 远程管理系统 - 水寒凌魔改版</p>
			<p> IT睿行 itrf.cn 版权所有 </p>
        </footer>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
